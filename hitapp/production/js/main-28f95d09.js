import{j as r,r as u}from"./react-e8886b06.js";import{u as S,a as h,P as x}from"./react-redux-28064587.js";import{c as j,l as y,a as b}from"./redux-5ef48740.js";import{t as g}from"./redux-thunk-ef899f4c.js";import"./hoist-non-react-statics-f84d2b88.js";import{F as I,I as w,S as P,M as T,P as M}from"./@mui-119afba8.js";import{r as _}from"./react-dom-4d145aa7.js";import"./object-assign-b33fa8b7.js";import"./@babel-531ed693.js";import"./react-is-a192e302.js";import"./clsx-1229b3e0.js";import"./@emotion-afdb9580.js";import"./stylis-79144faa.js";import"./react-transition-group-b4c1b803.js";import"./scheduler-12376d7f.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function a(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(e){if(e.ep)return;e.ep=!0;const o=a(e);fetch(e.href,o)}})();var i=(s=>(s.SITE="SITE",s.Elevator="Elevator",s.ElevatorClear="ElevatorClear",s))(i||{});const p={},O="",L=(s=O,t)=>{switch(t.type){case"SITE":return t.SITE;default:return s}},R=(s=p,t)=>{switch(t.type){case"Elevator":return{...s,...t.Elevator};case"ElevatorClear":return p;default:return s}},C=j({SITE:L,Elevator:R}),$=y(C,b(g)),d=S,N="_ElevatorsShow_8y7os_1",A="_EachelevatorsShow_8y7os_5",B="_InputLabel_8y7os_21",m={ElevatorsShow:N,EachelevatorsShow:A,InputLabel:B};function D(s){const{title:t,options:a}=s,l=h(),{[i.SITE]:e}=d(o=>({[i.SITE]:o[i.SITE]}));return r.jsx(u.StrictMode,{children:r.jsxs(I,{fullWidth:!0,children:[r.jsx(w,{className:m.InputLabel??"",children:t}),r.jsx(P,{fullWidth:!0,onChange:o=>{l({type:i.SITE,[i.SITE]:o.target.value}),l({type:i.ElevatorClear})},value:e,children:a.map((o,n)=>r.jsx(T,{value:n,children:o},`option${n+1}`))})]})})}const F=s=>{switch(s){case"up":return"向上";case"down":return"向下";default:return"停止"}};function W(){const{[i.Elevator]:s}=d(t=>({[i.Elevator]:t[i.Elevator]}));return r.jsx(u.StrictMode,{children:r.jsx("div",{className:m.EachelevatorsShow,children:((t={})=>{const a=[];if(!Object.keys(t).length)return r.jsx("div",{children:"暂无电梯信息"});for(const l in t)if(Object.hasOwn(t,l)){const e=t[l];if(e){const{number:o}=e,n=~~(o*100/14);a.push(r.jsx("div",{children:r.jsxs(M,{elevation:3,sx:{backgroundColor:(c=>c>80?"rgb(253, 237, 237)":c>60?"rgb(255, 244, 229)":c>40?"rgb(229, 246, 253)":"rgb(237, 247, 237)")(n)},children:[r.jsxs("div",{children:["电梯编号：",l]}),r.jsxs("div",{children:["电梯状态：",e.state==="run"?"运行":"暂停"]}),r.jsxs("div",{children:["电梯方向：",F(e.direction)]}),r.jsxs("div",{children:["电梯当前楼层：",e.floor]}),r.jsxs("div",{children:["电梯人数：",o]}),r.jsxs("div",{style:{color:(c=>c>80?"rgb(95, 33, 32)":c>60?"rgb(102, 60, 0)":c>40?"rgb(1, 67, 97)":"rgb(30, 70, 32)")(n),fontWeight:"bolder"},children:[" 满载率：",`${n}%`]})]})},l))}}return r.jsx(u.StrictMode,{children:a})})(s)})})}const{random:le}=Math;function q(){let s=!0;const t=h(),{[i.SITE]:a}=d(e=>({[i.SITE]:e[i.SITE]})),l=e=>!!e;return u.useEffect(()=>{const e=n=>{t({type:i.Elevator,[i.Elevator]:n})};return(()=>{const n=a!=="";if(!n)return()=>!1;const c=new EventSource(`/api/ElevatorEventSource?site=${a}`,{withCredentials:!1});return c.onmessage=function(v){const f=JSON.parse(v.data);l(f)&&e(f)},c.onerror=function(){},()=>{c.close()}})()},[t,a]),r.jsx(u.StrictMode,{})}function z(){const s=Object.freeze([{label:"主楼",elevators:[[1,2],[3,4]]},{label:"图书馆",elevators:[[1,2],[3]]}]);return r.jsxs(u.StrictMode,{children:[r.jsxs("div",{children:[r.jsx(D,{options:s.map(t=>t.label),title:"请选择地点"}),r.jsx(W,{})]}),r.jsx(q,{})]})}const J="_APP_15l9d_1",K={APP:J};function U(){return r.jsx(u.StrictMode,{children:r.jsx("div",{className:K.APP,children:r.jsx(x,{store:$,children:r.jsx(z,{})})})})}_.render(r.jsx(u.StrictMode,{children:r.jsx(U,{})}),document.body);
